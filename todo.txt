Release plan:
- v30: Website improvements (save/export/import presets)
- v31: Area-themed palettes
- v32: Take ammo kills into account in logic, use boss scenarios

TODO:
- During escape, block backward path better
- Handle shinespark_frames=0 correctly (don't require 29 energy)
  - Fix bug with reverse logic? ( Map seed=330023052, item placement seed=3918075891, Open Easy)
- Better validation/error-handling of web service
  - check that random seed is integer
  - push more validation into client
- Option for anti-softlock patches (e.g. in Moat, Early Supers, etc.)
  - disable acid trigger in Leodox room
- Put spoiler info in collapsible accordion.
- Add note to strat in Post-Crocomire farming room to get to top-left with HiJump
  (run on platform enemy and jump)
- Change Shaktool flag behavior: require entering one door and exiting the opposite door.
- Switch off ammo (e.g. Missiles or Supers) when acquiring Hyper Beam.
- Use separate worker pool to run randomization (to avoid blocking web requests)
- Add more race-friendly options:
  - Distinct map tile for major items vs. minor items
  - Make map stations accessible earlier
- Rust migration bugfixes:
  - phantoon not following the rules
  - two map stations
- on open mode, don't place items in one-way reachable locations (to keep open the possibility of placing key items
  there later once they become bireachable)
- remove fast elevators?
    - They mess up the heat Frames logic in Main Hall + Lower Norfair Elevator Room (though this also wouldn't be
      hard to fix with an override)
- Rust cleanup:
    - Use `serde_json` instead of `json` crate for loading sm-json-data.
    - Clean up error handling: get rid of a bunch of remaining unwrap()'s, etc.
- make option for music: vanilla, area-themed, or none
- at end of randomization, make sure G4 bosses are reachable (to guard against a case like Phantoon being locked behind
  Bowling, or a G4 boss locked behind Mother Brain).
- on web site, clarify some things about how logic works, e.g.
    - hellruns may be required if canHeatRun tech is enabled.
- Make Gravity-only Samus palette different from Gravity+Varia.
    - Figure out how this can work with custom sprites.
- Try a different kind of "Open" item placement, to reduce likelihood of items getting heavily front-loaded with good items:
  - Start by placing all items randomly, then check that game is beatable.
  - Similar approach could maybe apply to Closed/Semiclosed?: find a beatable game using random placement, then adjust
    the placements to push unnecessary items further back.
      - Or just improve the current approach by rejecting cases where the set of bireachable item locations grows too
      slowly.
- Be more careful with requirements on farms
  - e.g. Zebbo farm in Plowerhouse Room is not really usable without heat-proof and some way to kill the the owls.
- make some quality-of-life changes optional?:
  - all movement items collected & equipped when hyper beam is acquired
  - map stations revealed from start of game
  - supers do double damage to mother brain
- apply bomb torizo patch (from varia) to make it awake when its item is picked up (rather than bombs)?
- fix color of reserve tank energy in equipment menu (got messed up by colored arrows)
- check boss logic on easy settings:
  - golden torizo should need tech to avoid damage?
  - canBePatient should be required when doing long fight with only Charge?
- put back gray doors locked by enemy kills (Metal Pirates, etc.)
  - decide whether these should still wake the planet?
- consider moving the MB barriers to the right one tile (or two?), to make them interfere less with ice zeb skip.
- move GFX colors:
  - Morph Ball room (blue brinstar), tileset 7:
    - [0x31, 0x32, 0x33] -> [0x38, 0x39, 0x3A]
- add grapple + xray to the HUD on hyper beam collect.
- make the pause map tiles align with the grid
- fix tiny bug: when bottom-left door of landing site is an area transition, the arrow shows up from the beginning
  of the game (due to running the door ASM while loading the game)
- fix map tiles showing next to pause menu area name, which should be black (comes from TR map patch)
- take cross-room strats into account in the logic
- fix fine logic details in Kraid fight:
    - if entering from the right, there may be some energy or item requirements to cross the spikes to get to the
      left (the vanilla game requirements might be a little different from Map Rando because of how the vanilla game
      teleports Samus to the left screen).
- add suitless strats for Ridley
- fix graphical problem with barriers not clearing in Mother Brain room (happened next to Crocomire's Room?)
- consider putting map stations closer to the ship? (still balanced to one per area)
- update ammo refilled message box.
- another item placement mode where selected tech is forced
- turn Crateria scrolling sky back on. Update values for the 14 doors here: https://patrickjohnston.org/bank/8F#fB76A.
- fix fake gray door graphics in Kraid room, Phantoon room
- check if map reload is messing up timing at start of rooms (e.g. Beta Power Bombs)
  - or more likely music reload is a factor. Can we artificially trigger reload in Morph Ball room or do something else
  to fix the timing with the hoppers?
    - also look into way to avoid a hit when coming into tourian hopper room?
    (e.g., give i-frames, or try to adjust the spawn pattern)
- shorten mother brain 1 death cutscene? (remove flashing?)
- organize tech on website.
- interactive spoiler map (with room maps, list of possible strats, etc.)
- fix bug where wrong tiles sometimes show at top of pause-menu map
- implement enemyKill in logic
- rework item config:
  - extra axis for ammo openness
  - add middle setting
- figure out race condition between fastdoors and Mother Brain room setup. Maybe code around $80836F could be used
  to wait? Though maybe this doesn't matter because we don't want to add fastdoors anyway.
- figure out and fix what's going on with tiles below Warehouse Entrance when it crosses areas.
- fix internal checksum in output ROM
- Possibly shorten Baby Metroid cutscene for quality of life (since it might be necessary to traverse it multiple times)
- add README
    - make
- cross-area transitions
  - to fix graphical glitches (look into using special GFX flag?)
- balance boss distribution (one boss per area, corresponding to vanilla?)
- fix suit graphics not showing after getting suit (consequence of skipping animation)?
- minimizer mode? (select rooms to include randomly, hand-picked, and/or user-selected)
- add strat for jumping over fune with no damage (check osse Twitch clip).
- make map rando for other hacks (e.g. project base, subversion?)

notes on tileset palette stuff:
  - tileset table: $8FE6A2  (will need to move to location with more space)
  - tileset pointers: $8FE7A7  (will need to update to point into new tileset table)
  - current tileset (one row of tileset table):
    - $07C0: Tileset tile table pointer
    - $07C3: Tileset tiles pointer
    - $07C6: Tileset palette pointer
  - reference to tileset pointers: $82:DF02 (LDA $E7A7, y)
- tileset data decompressed to RAM:
    - tile table: $7E:A800  (at $82:E856)
       - CRE tile table: $7E:A000  (at $82:E843)
          - from $B9A09D
    - tiles: $7E:2000  (at $82:E42E)
      - VRAM $0000 (at $82:E7B4)
    - palette: $7E:C200  (at $82:E43F)


notes on marking elevator tiles:
- boss tile marking: $90:A7E2


title graphics notes:
  - title
     - sprites GFX: $95:80D8 ("Super Metroid" graphics, "Nintendo", etc.):
         - bank pointer to sprite GFX at $8B:9295
         - word pointer to sprite GFX at $8B:9299
         - copied to VRAM $6000..7FFF
     - spritemap: $8C:879D (also $8C:833D but this is unused)?
         - free space at $8C:F760
         - (2-byte) pointer to spritemap: $8B:A0C5
         - Description of spritemap format: $A9:93EE
     - uses screen mode 7 during title
          - only BG layer is BG1 (as always for mode 7).
          - OAM base: VRAM 0xC000  (sprite GFX for "Super Metroid" title)
     - normally mode 1 elsewhere
  - title BG GFX: $94:E000 (0xA6000)
  - title BG tilemap: $96:FC04 (0xB7C04)




Notes on calculating PLM position (and comparing with Samus position):

;    $0AF6: Samus X position (in pixels)
;    $0AFA: Samus Y position (in pixels)
;
;    $1C29: PLM X block (calculated by $84:8290)
;    $1C2B: PLM Y block (calculated by $84:8290)

$84:82AA 8D 2B 1C    STA $1C2B  [$7E:1C2B]
$84:82AD AD 16 42    LDA $4216  [$7E:4216]
$84:82B0 8D 29 1C    STA $1C29  [$7E:1C29]


;;; $BB6B: Pre-instruction - wake PLM if triggered or Samus is within 4 block column below PLM ;;;
{
$84:BB6B 22 90 82 84 JSL $848290[$84:8290]  ; Calculate PLM block co-ordinates
$84:BB6F AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$84:BB72 4A          LSR A                  ;|
$84:BB73 4A          LSR A                  ;|
$84:BB74 4A          LSR A                  ;} If [Samus X block] = [PLM X block]:
$84:BB75 4A          LSR A                  ;|
$84:BB76 CD 29 1C    CMP $1C29  [$7E:1C29]  ;|
$84:BB79 D0 10       BNE $10    [$BB8B]     ;/
$84:BB7B AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;\
$84:BB7E 4A          LSR A                  ;|
$84:BB7F 4A          LSR A                  ;|
$84:BB80 4A          LSR A                  ;|
$84:BB81 4A          LSR A                  ;} If 0 <= [Samus Y block] - [PLM Y block] < 5: go to BRANCH_TRIGGERED
$84:BB82 38          SEC                    ;|
$84:BB83 ED 2B 1C    SBC $1C2B  [$7E:1C2B]  ;|
$84:BB86 C9 05 00    CMP #$0005             ;|
$84:BB89 90 05       BCC $05    [$BB90]     ;/

$84:BB8B BD 77 1D    LDA $1D77,x[$7E:1DC5]  ;\
$84:BB8E F0 13       BEQ $13    [$BBA3]     ;} If not triggered: return

; BRANCH_TRIGGERED
$84:BB90 FE 27 1D    INC $1D27,x[$7E:1D75]  ;\
$84:BB93 FE 27 1D    INC $1D27,x[$7E:1D75]  ;} PLM instruction list pointer += 2
$84:BB96 A9 01 00    LDA #$0001             ;\
$84:BB99 9F 1C DE 7E STA $7EDE1C,x[$7E:DE6A];} PLM instruction timer = 1
$84:BB9D A9 A3 BB    LDA #$BBA3             ;\
$84:BBA0 9D D7 1C    STA $1CD7,x[$7E:1D25]  ;} PLM pre-instruction = RTS

$84:BBA3 60          RTS



Mini-map notes:
- HUD GFX:
    - ROM $9A:B200
- HUD Tilemap:
    - RAM $7E:C608
    - VRAM $5820 (BG3)


Notes on game-over/loading:
- In file select, some loading happens starting at $81AD17

Notes on usage of area ($079F and $7E:D918):


Map-related usages: ---------------------------------------------------
Bank $80.asm:$80:85A7 AE 9F 07    LDX $079F  [$7E:079F]
Bank $80.asm:$80:858F AD 9F 07    LDA $079F  [$7E:079F]
	;;; $858C: Load mirror of current area's map explored ;;;

Bank $80.asm:$80:85C9 AD 9F 07    LDA $079F  [$7E:079F]
Bank $80.asm:$80:85E6 AE 9F 07    LDX $079F  [$7E:079F]
	;;; $85C6: Mirror current area's map explored ;;;

Bank $82.asm:$82:941B AD 9F 07    LDA $079F  [$7E:079F]
;;; $93C3: Updates the area and map in the map screen ;;;

Bank $82.asm:$82:9440 AD 9F 07    LDA $079F  [$7E:079F]
Bank $82.asm:$82:9475 AE 9F 07    LDX $079F  [$7E:079F]
;;; $943D:  ;;;
   (subroutine in $93C3: Updates the area and map in the map screen ;;;)

Bank $82.asm:$82:952D AD 9F 07    LDA $079F  [$7E:079F]
Bank $82.asm:$82:9562 AE 9F 07    LDX $079F  [$7E:079F]
;;; $9517: Draw room select map ;;;

Bank $82.asm:$82:962B AD 9F 07    LDA $079F  [$7E:079F]
;;; $9628:  ;;;
		(???)

Bank $82.asm:$82:9ED5 AD 9F 07    LDA $079F  [$7E:079F]
Bank $82.asm:$82:9F01 AD 9F 07    LDA $079F  [$7E:079F]
;;; $9EC4:  ;;;
		(???)

Bank $82.asm:$82:B6BC AD 9F 07    LDA $079F  [$7E:079F]
;;; $B672: Draw map icons ;;;

Bank $82.asm:$82:B71C AD 9F 07    LDA $079F  [$7E:079F]  ;|
Bank $82.asm:$82:B777 AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $B6DD:  ;;;
	(??? - related to map icons)

Bank $82.asm:$82:B79C AD 9F 07    LDA $079F  [$7E:079F]
Bank $82.asm:$82:B7BB AD 9F 07    LDA $079F  [$7E:079F]
;;; $B798: Draw save station map icon ;;;

Bank $82.asm:$82:B80E AD 9F 07    LDA $079F  [$7E:079F]
;;; $B805: Draw simple map icon ;;;
; Icons. Missile, energy, map, and debug save. X = type, A = graphic

Bank $82.asm:$82:B896 AE 9F 07    LDX $079F  [$7E:079F]
Bank $82.asm:$82:B8A2 AD 9F 07    LDA $079F  [$7E:079F]
;;; $B892: Display map boss icons ;;;

Bank $82.asm:$82:BB3A AE 9F 07    LDX $079F  [$7E:079F]  ;\
Bank $82.asm:$82:BB46 AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $BB30: Display map elevator destinations ;;;
		
Bank $90.asm:$90:A9BE AD 9F 07    LDA $079F  [$7E:079F]  ;|
;;; $A91B: Update mini-map ;;;

Bank $90.asm:$90:AA73 AD 9F 07    LDA $079F  [$7E:079F]  ;\
Bank $90.asm:$90:AA78 6D 9F 07    ADC $079F  [$7E:079F]  ;|
;;; $AA43: Update HUD mini-map tilemap ;;;

Bank $84.asm:$84:8C91 AE 9F 07    LDX $079F  [$7E:079F]
;;; $8C8F: Instruction - activate map station ;;;

Bank $8F.asm:$8F:C90C AE 9F 07    LDX $079F  [$7E:079F]
;;; $C90A: Setup ASM: set collected map ;;;
; Room $DAAE. Tourian -> Crateria 
		(Tourian first room)

Bank $84.asm:$84:B19C AE 9F 07    LDX $079F  [$7E:079F]  ;\
;;; $B18B: Setup - PLM $B6D3 (map station) ;;;
		(checking if collected current area map)

Save/load and file menu usages: ----------------------------------------
Bank $82.asm:$82:DE86 8D 9F 07    STA $079F  [$7E:079F]  ;/
;;; $DE6F: Load room header ;;;

Bank $80.asm:$80:C443 AD 9F 07    LDA $079F  [$7E:079F]
Bank $80.asm:$80:C4AC 8D 9F 07    STA $079F  [$7E:079F]
	;;; $C437: Load from load station ;;;
	(first usage to get index of save station, 
	second to set area from room header)

Bank $81.asm:$81:8023 AD 9F 07    LDA $079F  [$7E:079F]  ;\
Bank $81.asm:$81:8043 AD 9F 07    LDA $079F  [$7E:079F]  ;\
	;;; $8000: Save to SRAM ;;;
	(hijacked by Scyzer's patch)

Bank $81.asm:$81:80F4 8D 9F 07    STA $079F  [$7E:079F]  ;} Area index = [SRAM area index]
Bank $81.asm:$81:8123 8D 9F 07    STA $079F  [$7E:079F]  ; Region = Crateria
	;;; $8085: Load from SRAM ;;;
	(hijacked by Scyzer's patch)

Bank $81.asm:$81:9CEB 8D 9F 07    STA $079F  [$7E:079F]
;;; $9C9E: Save game menu - index 19h:  ;;;

Bank $81.asm:$81:A395 AD 9F 07    LDA $079F  [$7E:079F]
Bank $81.asm:$81:A3B0 EC 9F 07    CPX $079F  [$7E:079F]
;;; $A37C: File select map - index 1 ;;;

Bank $81.asm:$81:A57D AC 9F 07    LDY $079F  [$7E:079F]
;;; $A578: File select map - index 12h ;;;

Bank $81.asm:$81:A587 AC 9F 07    LDY $079F  [$7E:079F]
;;; $A582: File select map - index 3: Load area select background tilemap ;;;


Bank $81.asm:$81:A8B5 8D 9F 07    STA $079F  [$7E:079F]
Bank $81.asm:$81:A8CA 8D 9F 07    STA $079F  [$7E:079F]
Bank $81.asm:$81:A8E2 AD 9F 07    LDA $079F  [$7E:079F]
;;; $A8A9:  ;;;
	(???)

Bank $81.asm:$81:AB1A AD 9F 07    LDA $079F  [$7E:079F]
;;; $AAAC: File select map - index 7 ;;;

Bank $81.asm:$81:AD3C 8D 9F 07    STA $079F  [$7E:079F]
;;; $AD17: File select map - index 9 ;;;

Bank $81.asm:$81:ADC0 AD 9F 07    LDA $079F  [$7E:079F]
Bank $81.asm:$81:ADF2 AD 9F 07    LDA $079F  [$7E:079F]
Bank $81.asm:$81:AE05 AD 9F 07    LDA $079F  [$7E:079F]
;;; $AD7F: File select map - index Ah: room select map ;;;

Bank $81.asm:$81:AE6A AD 9F 07    LDA $079F  [$7E:079F]
;;; $AE13:  ;;;
	(???)

Bank $81.asm:$81:AFE6 AE 9F 07    LDX $079F  [$7E:079F]
Bank $81.asm:$81:AFEC AC 9F 07    LDY $079F  [$7E:079F]
;;; $AFD3: File select map - index 10h ;;;


Bank $81.asm:$81:B005 AD 9F 07    LDA $079F  [$7E:079F]
;;; $AFF6: File select map - index 14h ;;;


Bank $82.asm:$82:8032 9C 9F 07    STZ $079F  [$7E:079F]  ; Area = Crateria
Bank $82.asm:$82:8044 8D 9F 07    STA $079F  [$7E:079F]  ;} Area = Ceres
;;; $8000: Game state 6/1Fh/28h (loading game data / set up new game / transition to demo) ;;;

Bank $82.asm:$82:86EC 8D 9F 07    STA $079F  [$8F:079F]  ;|
;;; $8679: Load demo room data ;;;


Bank $8B.asm:$8B:A39C 9C 9F 07    STZ $079F  [$7E:079F]  ; Area index = Crateria
;;; $A395: Cinematic function - intro - initial ;;;

Bank $8B.asm:$8B:C10D 8D 9F 07    STA $079F  [$7E:079F]
;;; $C100:  ;;;
		(set area to Ceres when setting up new game)


Other usages: ---------------------------------------------------
Bank $80.asm:$80:81AE AE 9F 07    LDX $079F  [$7E:079F]
	;;; $81A6: Set boss bits in A for current area ;;;

Bank $80.asm:$80:81CA AE 9F 07    LDX $079F  [$7E:079F]
	;;; $81C0: Unused. Clear boss bits in A for current area ;;;

Bank $80.asm:$80:81E4 AE 9F 07    LDX $079F  [$7E:079F]
	;;; $81DC: Checks if the boss bits for the current area match any bits in A ;;;

Bank $80.asm:$80:CD0D AD 9F 07    LDA $079F  [$7E:079F]  ;\
	;;; $CD07: Set elevators as used ;;;

Bank $82.asm:$82:B7D5 AD 9F 07    LDA $079F  [$7E:079F]
;;; $B7D1:  ;;;
; Debug related

Bank $82.asm:$82:B7EF AD 9F 07    LDA $079F  [$7E:079F]
;;; $B7EB:  ;;;
; Debug related

Bank $82.asm:$82:BE5C AD 9F 07    LDA $079F  [$7E:079F]
;;; $BE5A:  ;;;
; So... this routine does some stuff and then crashes?

Bank $82.asm:$82:BEC3 9C 9F 07    STZ $079F  [$7E:079F]
Bank $82.asm:$82:BEC8 AD 9F 07    LDA $079F  [$7E:079F]
Bank $82.asm:$82:BEE0 AE 9F 07    LDX $079F  [$7E:079F]
Bank $82.asm:$82:BEF7 AD 9F 07    LDA $079F  [$7E:079F]
Bank $82.asm:$82:BEFB 8D 9F 07    STA $079F  [$7E:079F]
;;; $BEA3:  ;;;
; So... this routine does some stuff and then crashes as well? Great!


Bank $82.asm:$82:E833 AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $E7D3: Load level data, CRE, tile table, scroll data, create PLMs and execute door ASM and room setup ASM ;;;
	(just checking if Ceres)

Bank $82.asm:$82:EADB AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $EA73: Load level, scroll and CRE data ;;;
	(just checking if Ceres)

Bank $84.asm:$84:8D16 AD 9F 07    LDA $079F  [$7E:079F]  ;|
;;; $8CF1: Instruction - activate save station and go to [[Y]] if [save confirmation selection] = no ;;;

Bank $84.asm:$84:B7C3 AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $B7C3: Setup - PLM $B7EB (enable sounds in 20h frames, or F0h frames if on Ceres) ;;;
		(just checking if Ceres)

Bank $86.asm:$86:932F AD 9F 07    LDA $079F  [$7E:079F]
;;; $932F:  ;;;
		(something to do with Ridley's fireball -- checking if in Norfair or Tourian?)

Bank $86.asm:$86:9451 AC 9F 07    LDY $079F  [$7E:079F]
;;; $9442: Unused ;;;

Bank $86.asm:$86:AB96 AD 9F 07    LDA $079F  [$7E:079F]
;;; $AB8A: Instruction ;;;
		(checking if Crateria -- something to do with enemy drops)

Bank $89.asm:$89:AC62 AD 9F 07    LDA $079F  [$7E:079F]  ;\
Bank $89.asm:$89:AC98 AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $AB82: Load FX header ;;;

Bank $8D.asm:$8D:EEC6 AE 9F 07    LDX $079F  [$7E:079F]  ;|
;;; $EEC5: Pre-instruction - delete palette FX object if area mini-boss is dead ;;;

Bank $8D.asm:$8D:F731 AE 9F 07    LDX $079F  [$7E:079F]  ;|
;;; $F730: Setup - palette FX object $F779 (Brinstar 8) ;;;
		(related to Spore Spawn)

Bank $90.asm:$90:EA57 AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $EA45: Pause check ;;;
		(just checking if Ceres)

Bank $90.asm:$90:ED88 AD 9F 07    LDA $079F  [$7E:079F]
;;; $ED88: Footstep graphics ;;;
; Water splashing in Maridia and Crateria, dust if speedrunning.
; Only works on certain frames, assumed to be walking/running


Bank $91.asm:$91:850F AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $84D5: Pause/terminate/reset demo recorder ;;;
; Controller 2 X pauses/terminates demo recorder
; Controller 2 A resets demo recorder

Bank $91.asm:$91:CF40 AD 9F 07    LDA $079F  [$7E:079F]
;;; $CF3E:  ;;;
		(seems related to respawning speedboost block which only works in Brinstar, e.g. in dachora room)

Bank $91.asm:$91:E097 AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $E00D: Initialise Samus ;;;
; Executed when loading demo or starting at Ceres/Zebes
		(just checking if Ceres)

Bank $91.asm:$91:F0A5 AD 9F 07    LDA $079F  [$7E:079F]
;;; $F0A5: Handle landing graphics ;;;

Bank $94.asm:$94:8E83 AD 9F 07    LDA $079F  [$7E:079F]
;;; $8E83: Samus block collision reaction - spike block - BTS 0 (generic spike) ;;;
; Unless already hurt, deal 60 damage (environmental) to Samus, unless in WS and Phantoon is alive


Bank $94.asm:$94:908C AD 9F 07    LDA $079F  [$7E:079F]  ;|
;;; $906F: Samus block collision reaction - horizontal - special air ;;;
; Area dependant BTS

Bank $94.asm:$94:90BA AD 9F 07    LDA $079F  [$7E:079F]
;;; $909D: Samus block collision reaction - vertical - special air ;;;
		(Area dependant BTS)

Bank $94.asm:$94:90EC AD 9F 07    LDA $079F  [$7E:079F]
;;; $90CB: Samus block collision reaction - horizontal - special block ;;;
; Check BTS.
; If positive, make a PLM from the table at 9139,X (X=2*BTS, max BTS is 4F).
; If negative, make a region-indexed PLM (91D9 + 20*Area + 2*BTS, max BTS is 0F).
; If PLM fails to be made, JMP $8F49 (normal solid)

Bank $94.asm:$94:9123 AD 9F 07    LDA $079F  [$7E:079F]
;;; $9102: Samus block collision reaction - vertical - special block ;;;
; Check BTS.
; If positive, make a PLM from the table at 9139,X (X=2*BTS, max BTS is 4F).
; If negative, make a region-indexed PLM (91D9 + 20*Area + 2*BTS, max BTS is 0F).
; If PLM fails to be made, JMP $8F82 (normal solid)

Bank $94.asm:$94:98EA AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $98EA: Block inside reaction - special air - BTS 8 (Wrecked Ship treadmill - rightwards) ;;;
		(checking if Wrecked Ship)

Bank $94.asm:$94:9910 AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $9910: Block inside reaction - special air - BTS 9 (Wrecked Ship treadmill - leftwards) ;;;

Bank $94.asm:$94:9B2F AD 9F 07    LDA $079F  [$7E:079F]  ;|
;;; $9B16: Block inside reaction - special air ;;;

Bank $94.asm:$94:9D90 AD 9F 07    LDA $079F  [$7F:079F]
;;; $9D71: Block bombed reaction - special block ;;;
; Load the BTS into A.
; If negative, AND with #$007F and use to find a region-indexed PLM (94:9DC4 + Region * 10 + BTS * 2).
; If positive, use as an index for 94:9DA4,X to make a PLM.
; Either way, clear V, SEC, and RTS

Bank $94.asm:$94:9E92 AD 9F 07    LDA $079F  [$7E:079F]
;;; $9E73: Block shot/bombed/grappled reaction - shootable block ;;;
; Check BTS. If positive, create PLM from main table (94:9EA6 + BTS*2, 'max' BTS of 50).
; If negative, create region-indexed PLM (94:9F46 + 10*region + BTS*2, 'max' BTS of 10).
; Either way, clear V, SEC, RTS.

Bank $A0.asm:$A0:A7E7 AD 9F 07    LDA $079F  [$7E:079F]  ;\
Bank $A0.asm:$A0:A88D AD 9F 07    LDA $079F  [$7E:079F]  ;\
;;; $A6DE: Handles beam damage, freezing, and sound ;;;
		(checks if area is Norfair, for some reason freezing enemies works differently there?)

Bank $A4.asm:$A4:8A73 AE 9F 07    LDX $079F  [$7E:079F]
;;; $8A5A: Initialisation AI - enemy $DDBF (Crocomire) ;;;
		(checks area mini-boss bit to see if Crocomire is already dead)

Bank $A4.asm:$A4:9B90 AE 9F 07    LDX $079F  [$7E:079F]
;;; $9B86:  ;;;
		(set area mini-boss bit when Crocomire is killed)

Bank $A4.asm:$A4:F67A AE 9F 07    LDX $079F  [$7E:079F]
;;; $F67A: Initialisation AI - enemy $DDFF (Crocomire's tongue) ;;;
		(checks area mini-boss bit to see if Crocomire is already dead)

Bank $A5.asm:$A5:92D4 AE 9F 07    LDX $079F  [$7E:079F]
;;; $92AB:  ;;;
		(set area boss bit when Draygon is killed)

Bank $A5.asm:$A5:EA8F AE 9F 07    LDX $079F  [$7E:079F]  ;\
;;; $EA2A: Initialisation AI - enemy $DF3F/$DF7F (Spore Spawn) ;;;
		(check area mini-boss bit to see if Spore Spawn is already dead)

Bank $A5.asm:$A5:EE30 AE 9F 07    LDX $079F  [$7E:079F]
;;; $EDF3: Spore Spawn reaction ;;;
		(set area mini-boss bit when Spore Spawn is killed)

Bank $A6.asm:$A6:A0F5 AE 9F 07    LDX $079F  [$7E:079F]
;;; $A0F5..EFB0: Ridley ;;;
;;; $A0F5: Initialisation AI - enemy $E13F/$E17F (Ridley) ;;;
		(check area boss bit to see if Ridley is dead)

Bank $A6.asm:$A6:A15C AD 9F 07    LDA $079F  [$7E:079F]
Bank $A6.asm:$A6:A369 AC 9F 07    LDY $079F  [$7E:079F]
Bank $A6.asm:$A6:A424 AD 9F 07    LDA $079F  [$7E:079F]
Bank $A6.asm:$A6:A469 AD 9F 07    LDA $079F  [$7E:079F]
Bank $A6.asm:$A6:A478 AD 9F 07    LDA $079F  [$7E:079F]
;;; $A0F5..EFB0: Ridley ;;;
		(check if area is Norfair)

Bank $A6.asm:$A6:C369 AD 9F 07    LDA $079F  [$7E:079F]
;;; $C2B1: Handle typewriter text ;;;
		(check if area is Ceres)

Bank $A6.asm:$A6:D914 AD 9F 07    LDA $079F  [$7E:079F]
Bank $A6.asm:$A6:D93B AD 9F 07    LDA $079F  [$7E:079F]
;;; $D914:  ;;;
; Cause room shaking, only happens in Ceres. Has unreachable code for Norfair room shaking

Bank $A6.asm:$A6:DF8A AD 9F 07    LDA $079F  [$7E:079F]
;;; $DF8A: Enemy shot - enemy $E13F/$E17F (Ridley) ;;;
		(check if area is Norfair)

Bank $A6.asm:$A6:E4D2 AD 9F 07    LDA $079F  [$7E:079F]
;;; $E4D2: Instruction ;;;
; If in Norfair or Samus is below 30 health, go to next instruction. Else go to argument, and set main AI script timer to 8

Bank $A6.asm:$A6:F66B AE 9F 07    LDX $079F  [$7E:079F]  ;\
;;; $F66A: Instruction - go to parameter if area boss is not dead ;;;
		(check if area is boss is dead -- for Ceres Ridley?)

Bank $A7.asm:$A7:A92D AE 9F 07    LDX $079F  [$7E:079F]
;;; $A92C: Check if Kraid has died ;;;

Bank $A7.asm:$A7:C822 AE 9F 07    LDX $079F  [$80:079F]  ;\
;;; $C815: Kraid function - fade in regular background - fade in BG palette 6 ;;;

Bank $A7.asm:$A7:DB7B AE 9F 07    LDX $079F  [$7E:079F]
;;; $DB3D:  ;;;
		(set boss bit when Phantoon killed)

Bank $A8.asm:$A8:CB77 AE 9F 07    LDX $079F  [$7E:079F]  ;\
;;; $CB77: Initialisation AI - enemy $E8FF (Wrecked Ship robot) ;;;

Bank $A8.asm:$A8:D196 AE 9F 07    LDX $079F  [$7E:079F]  ;\
;;; $D192: Enemy shot - enemy $E8FF (Wrecked Ship robot) ;;;

Bank $A8.asm:$A8:E668 AE 9F 07    LDX $079F  [$7E:079F]
;;; $E637: Initialisation AI - enemy $EA3F (Wrecked Ship spark) ;;;

Bank $B4.asm:$B4:942D AD 9F 07    LDA $079F  [$7E:079F]  ;|
;;; $941D: Debug. Draw enemy set name ;;;