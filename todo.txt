Planned work to prioritize (v119?):
- Allow more options to be overridden on the customization step:
  - examples: Item dots after collection, Area transition markers on map, Door locks size on map
  - these are all cosmetic changes to how the map is drawn, without affecting the information revealed.
  - options with more substantial effects could maybe be included, but we'd need to define rules for "Race mode" of which changes are allowed
- Add QoL setting for limiting starting map reveal to visited area
  - Currently when using the "Maps revealed from start" option (Partial or Full), all areas are revealed from the start.
  - This can be useful for "open spoiler" races or Escape start seeds (also very useful for development/debugging).
  - More generally, it can be overwhelming to the player to digest all that information immediately.
  - It could be useful to have another option that only reveals the map for areas that the player has visited.
- Finer-grained map reveal options for specific types of tiles (maybe?)
  - We can define categories of special tiles: map stations, refills, saves, objectives, items (each of the 4 tiers)
  - For each category, there could be 3 options: revealed from the start, when visiting the area, or not at all.
    - default setting would be map stations revealed when visiting the area, other tiles not at all.
  - Since it's a lot of settings, they need to be tucked away into a modal or collapsible, similar to what is done with "Item pool" or "Starting items", and then we can have mini-presets for popular choices.
  - Items are a tricky case to handle. Since the item dot does not occupy the whole tile, naively revealing it would also show parts of walls and other room features, which will probably look unacceptably bad.
    - So it would probably have to be supported by a dynamic partial reveal mechanism, so that initially it can show only the item dot and not other features in that tile.
    - Or the item case can just be postponed for later.
- Handle the new wallJumpAvoid property on strats and notables:
  - This identifies strats/notables that are only useful when playing with the "Collectible" wall jump option.
  - So by default we could hide these (on the Generate page as well as in logic pages), to reduce clutter.
  - Controls would need to be available, with 3 settings: to hide the wallJumpAvoid strats, to show them exclusively, or to show everything.
- Model carrying around a flash suit (in LocalState somewhere, and as another cost metric)
- Refine how initial ammo capacity works, and relax starting hub constraints:
  - Currently starting hubs are restricted to rooms where you can farm all types of resources (energy, Missiles, Supers, PBs).
  - But it may be slow, and this can sometimes result in an unreasonable expectations of managing/farming PBs in the early game.
  - Instead, what we should do is 1) relax the constraint on starting hubs to require them to only be an energy farm, and 2) not consider starting ammo (Missiles, Supers, PBs) to be available except to the extent that a regular logical farm makes them available.
- Make `resetRoom` account for the ~10 heat damage required to reset with a heated room (important for strats with `farmCycleDrops`).
- Refine the fireflea room behavior across tile themes & area palettes, to make sure there is enough visiblity:
  - The platforms in Red Brinstar Fireflea Room are often a problem currently.
- Logic work (sm-json-data):
  - Finish adding cross-room temp blue strats and remote runway setups/applications in Norfair
    - Add missing remote runway strats in pink brinstar hopper room left side
  - Populate wallJumpAvoid throughout the logic (strats and notables)
  - Finish checking flash suit logic
  - Maybe make some progress migrating farm strats (to use `farmCycleDrops`)

v118:
- DONE: implement comeInBlueSpaceJumping
- DONE: fix BG color in Warehouse Entrance
- DONE: fix issue with bombs opening wave beam doors.
- DONE: fix issue reported by Loptr: area transition markers not appearing in pause map next to 2-sided save/refill
  - https://discord.com/channels/1053421401354285129/1053434532973510748/1376607030764372049
- DONE: show video dev notes when enabled.
- DONE: fix logic page "canHeatRun"
- DONE: fix wall jump boots palette
- DONE: fix issue with vanilla item fanfare + fast save
- fix load checksum issue with random seed 0
- finish refining stutter water shinecharges.
- DONE: add side platform strats.
- mosaic:
  - restore morph tunnel continuation behind morph tunnel transition
- DONE: apply Fake Lava patch (resolve conflict with complementary_suits?)
- add more strats from Incomplete videos
- chaining temp blue after bouncing through should be extreme:
  - maprando.com/logic/room/59/13/4/134
- DONE: add new samus sprites
- DONE: rework map tiles (global pause tileset, and room-local mini-map tilesets)
- DONE: investigate unnecessary scroll bars showing up in Chrome in logic pages.
- DONE: fix sand hole start locations.
- DONE: check MB logic: 2+4 shouldn't be in logic without r-mode?
- DONE: fix disabled tank color
- DONE: fix color on one samus tile on equipment screen
- DONE: fix beam door black color
- DONE: check why speed booster chozo orb visible during scrolling
- DONE: apply correct setup ASM if Toilet intersects room with glass tube tiles
- DONE: add X-mode leniency setting and CF clip leniency
- DONE: remove vanilla music on vanilla map
- DONE: load barrier-clearing PLMs in Mother Brain setup ASM instead of door ASM
- DONE: prevent MB1 death unless objectives cleared
- DONE: override "h_fullEnemyDamageReduction"
- DONE: handle PowerBombPeriphery correctly in enemyKill logic
- DONE: handle PowerBombBlast multiplier correctly in enemyKill logic (e.g. for Metroids)
- DONE: add option to select specific start location
  - DONE: handle in settings upgrade
  - DONE: show in seed header
  - DONE: organize by area
  - DONE: update help/info
- DONE: snes mini compatibility with fast decompression
- DONE: investigate game-start crash reported by HisBeardNis
- DONE: decide whether or not to leave item PLMs (other than chozo orbs) as early-loading
- DONE: look into pause fade-in speed (currently asymmetric with fade-out)
- DONE: switch around palettes, to make acid FX fade, and improve item colors
- DONE: partial reveal door next to two-door save/refill rooms
- DONE: handle comeInWithSidePlatform environment
- DONE: add main hall elevator hazard marker
- DONE: add/associate video for canTrickyGMode.
- DONE: fix ultra-low QoL: when selecting QoL preset other than Off, disable ultra-low QoL.
- DONE: handle "detailNote" in tech and strats.
- DONE: handle "minExtraRunSpeed" in "leaveWithRunway"
- DONE: include "objectives" details on seed page.
- DONE: fix scrolling sky corruption, which got worse with the faster decompression
- DONE: move crateria tube tiles to CRE
- DONE: blue brinstar theme
- DONE: fix spoiler map bug:
  - non-existent (?) HiJump boots shown: https://maprando.com/seed/7wT9dbFrm/data/visualizer/index.html

Other future work: --------------------------------------------------------------------

ROM-patching fixes/improvements:
  - investigate audio-related lag after quick reload
  - draw door frame in front of hazard markers, for doors that don't have a door shell.
  - Fix glass tunnel PLM drawing: https://github.com/amoebaOfDoom/subversion/blob/master/Project/ASM/PLM%20draw%20fix.asm
    - currently the glass tunnel can look messed up when destroyed from below.
  - investigate momentum conservation: 
    - eddie says first-frame jump loses momentum: https://www.twitch.tv/videos/2317357753?t=2h17m11s
  - prevent empty tiles (grid lines only) from showing as explored on mini-map?
    - e.g. in Green Brin Firefleas Room, or when x-ray climbing rooms like Dachora, Crateria Supers
  - fix g4 start location problem: https://discord.com/channels/1053421401354285129/1053434532973510748/1230346387628101643
  - fix OOB when leaving Kraid Room from right during fight
  - clear SRAM more fully when saved seed does not match:
    - save slot position is being retained, so cursor might start on slots 2 or 3 initially
  - look into possible quicksave/load patch (like save states but not emulator-dependent)
    - could work better with music: continue playing same song or start from beginning if different
    - could retain game timer shown in credits
    - could retain map progress
    - could expire when using a save station
       - prevent accidental quickloads from losing lots of progress
  - make kraid camera act normal when entering from left?
    - same thing with spore spawn entering from bottom?
  - fix issue with pause map scrolling beyond bounds
  
Logic (sm-json-data):
- PCJR: "Left-Side Shinespark" (and related strats): rename and add "canShinechargeMovementComplex" req
- X-Ray climb from "strange positions" using G-mode:
  - example in Big Pink by bobbob: https://vimeo.com/623738489
- add iframe spike jump remote runways: e.g. East Cac Alley, Bowling Alley, Crateria Supers
- add `easyHeatFrames` logical requirement, for rooms like Speed Booster Hall
- add missing Red Tower grapple jump strats:
  - missed entering from the right
  - grapple jumping up only to the ledge (probably needs a new node)
    - shinespark strats could get up that node too, with fewer shinecharge frames
- new strats to add:
  - crumble jump of LN escape PB room, leavewithplatform
  - west cac alley CF clip
- R-mode forced stand-up clips (needs testing):
    - double chamber: right side (CF grapple clip too), if no walljumps
    - Acid Statue Room (no need for HiJump)
    - Mickey Mouse Room (alternative to CF grapple clip?)
    - West Ocean (alternative to ice clip?)
    - PCJR: up through crumble? (not sure if this can work, since enemy hit kills momentum and crumble respawns. If it works, where you can jump back up before crumble respawns, then CF clip would probably also work)
- refine botwoon requirements:
  - A distinction should probably be made between using supers vs. missiles:
    - e.g. 10 supers should be fine in Extreme (maybe Expert?)
  - 30 Missiles should be fine in Insane
- use Ship refill in G-mode strats:
  - for strats that enter G-mode into Landing Site, use it, and then go back out still in G-mode
- many other things:
  - see Issues on the GitHub: https://github.com/vg-json-data/sm-json-data/issues
  - see Incomplete status videos on https://videos.maprando.com/

Major new features (not clear yet which of these will ever happen):
- Fast travel via map stations
  - Have a "hub" room connected to each map station, with a door behind the map station that opens after activating that map.
- Hyperlinks and tooltips in the logic page JSON, to make the logic easier to browse and understand
- Logic simulator: a way to fill out items/flags/resources/obstacles to simulate logic and check if there is a logical path through a room:
  - Useful especially for calculating energy required for hellruns.
  - The boss calculator set up a lot of the infrastructure needed to support this.
  - Cross-room strats will be tricky, as you would have to be able to specify what the neighboring rooms are.
- "Larvas" objective: ~4 items to be collected (hidden among majors? or shown with an X? or have a setting to choose?)
- Music customization (SPC):
  - An advantage of SPC-based music customization is that it can be integrated into the site, similar to other customization options.
  - We already have MSU-1 support, which works fine, but SPC would avoid the need for special setup or hardware/platform restrictions.
    - Of course, MSU-1 will always be more flexible in allowing any kind of music.
  - A lot of work would be needed to curate/edit custom SPC, to ensure they can work properly with the sound effects.
    - Sound effects using non-existent "instruments" can crash the game, so we have to make sure that won't happen.
    - Also we want to make sure the glitched sound effects don't sound too bad.
- Improved save station balancing
  - Reshuffle single-tile rooms during item placement, to try to maintain good save coverage, accounting for logical 2-way reachability.
  - Define "distance" in a way that accounts for ease of access; e.g. coverage should probably only consider tricks roughly 1 tier lower than the skill assumptions selected?
- Custom demos (when idling on the title screen)
- Overhaul the G-mode logic schema, to be able to model using locked doors to overload PLMs, and opening PB doors with artificial morph.
- Make Gravity-only Samus palette different from Gravity+Varia?
    - Include support for custom sprites to define the new palette.
- Small-sized map option, where only a subset of the rooms are included?
  - Could maybe be done without a new map gen model, by chopping off parts of existing maps as an offline processing step.
  - This needs some thought about how to handle objectives: i.e. if an objective doesn't exist, then it needs to not be required.
- Support for horizontally mirrored rooms (requires heavy logic work, along with a new map gen model)
- Support for randomizing room environments: heat and water (massive logic work)
- make map rando for other hacks (e.g. project base, subversion?)
  - would be a lot of work. we could invite others to help implement the logic

Other:
- maybe run customization on client (with Rust WebAssembly)
  - then the ROM wouldn't need to be passed to the server.
  - but Mosaic (tile theming) data will need to be downloaded
- new entrance/exit conditions:
  - add comeInWithRunway/leaveWithRunwayExtension for Crateria Tube
  - add leaveBlueRunning exit condition (matching with comeInShinecharging/comeInGettingBlueSpeed)
  - but how to implement propagation of runway-length/speed info for this?
  - similarly, we'd like to support comeInGettingBlueSpeed in combination with leaveSpinning, leaveWithMockball, leaveWithSpringBallBounce, and leaveSpaceJumping.
  - also comeIn(Blue)Spinning could combine with leaveWithMockball, leaveWithSpringBallBounce
    - again, we need a way to propagate the runway-length/speed info
- figure out how to express the heat-frame requirement to go back through a door
- expand tech & strat notes on X-ray climbs: indicate when it is safer to only release X-ray while turning around in one direction
(when there are air tiles not visible in the initial screen).
- add sm-json-data tests:
  - check that if some implicit strats are overridden, then all applicable ones are.
- if strat includes doorUnlockedAtNode at destination node, then skip redundant unlock requirement.
- fix clippy lints and set up as part of CI
- simplify SeedData. It's not clear if we really even need this anymore.
- Make f_allItemsSpawn (etc.) not be a flag? Could be "i_allItemsSpawn" instead and handled similar to other logic-impacting settings.
- embed some logic data in video site? (e.g. show strat note when uploading/editing)
- handle steep starting down tile better: only should affect short-charging, not other uses of runways
- model energy usage in the escape.
  - can be necessary to ensure beatability of seeds with reduced items and disabled escape refill.
- add option to reroll seeds with not enough difficult required tricks?
- instructions on gmode and artificial morph
- fix weapon PowerBomb logic (can't remember if this is all already done?):
  - take into account that double hit is not possible with PowerBombPeriphery
  - take into account multiplier
- Remove unneeded items from last step in Desolate.
- in logic pages From/To node selections, improve contrast for grayed-out nodes.
- fix vanilla map music when "Random" start puts you in room with no music change (plays title screen music).
- handle door locks and flags more precisely; account for them when considering which key item to place
  - this can help forced mode take into account difficulty of defeating bosses (and acquiring other flags)
- spoiler map: show pop-up when hovering over step, to show additional collectible items (with their quantities) and instructions
  to click/double-click for details.
- rework QoL presets?:
  - keep same map options between Low and Default?
- consider making shaktool room one-way in map generation (so Reverse Shaktool strat could be moved up to Medium)
- have pause map mark most recent save (like in vanilla)
- main street shinespark frames need some looking into: "frames": 35 doesn't make sense?
- refine GT logic: not in logic with 7E+4R and 5 Supers, Grapple.
- make start locations and hub locations only use door nodes
  - that way much less risk of getting broken (or made unsound) by logic changes
- link to twin room in logic room pages.
- add physics/heated override to runway geometry
  - more generally, come up with some way to better account for the added difficulty when a strat cannot be retried or where a limited amount of retries are possible.
- revamp strat page: 
  - embed the video directly near the top? 
  - collapse the room diagram
- List notable strats in the main logic page?
- add a logic page for each difficulty tier (similar to the sections within the Generate page)
- clarify gate glitch leniency: that it doesn't apply to Pink Hopper Room gate
- consider prioritizing item placement at closer item locations relative to previous key item(s)
- incrementally build graph traversal with increasing difficulty tiers, acquiring flags in the process.
  - will allow better accounting of the difficulty of boss fights in forced mode
  - should be faster too
  - improved spoiler log route
- help buttons for rest of settings (e.g. explain boss proficiency calculations)
- handle sba attacks in "enemyKill" (already done?)
- more fine-grained "fast cutscenes" QoL options?: 
  - fast big boy cutscene
  - fast MB
  - fast saves, refills, maps?
- make item music tracks consistent, to eliminate music restarts that can happen between two item rooms
- see if we can do something about silent snails with Zebes asleep music
- possible enhancements to momentum conservation patch
  - remove need to be holding dash or to be in spin (probably bad)
  - retain speed when turning around with spin? (probably bad)
  - on ground, retain horizontal speed when unmorphing
    - by pressing up (or jump, if spring ball not equipped) while holding forward and dash
  - in air, retain horizontal speed when soft unmorphing while holding forward and dash
- handle runways with conditional physics (Volcano Room, Amphitheatre, East Pants Room)
- enforce tech dependencies:
  - e.g. enabling "canPreciseWalljump" should enable dependency "canWalljump"
  - disabling "canWalljump" should disable dependent "canPreciseWalljump"
- harder item progression mode, where new item may be required to be used for the return path.
- include a check that the client and server are matching versions and give a more meaningful error when they aren't
- fix missing Samus tile in Bomb message box (issue with map tile expansion patch)
- fix problem with disappearing typewriter text when pausing as escape sequence starts
- add a tip that you can share a seed using the URL.
- refine cross room shinesparks:
    - take into account how the accumulated speed affects energy required in next room.
    - this can make a big difference in some situations, e.g. sparking from Waterway into Mt. Everest
- fix bug where suit color does not change when changing suits while taking damage (e.g. lava dive)?
- clean up the web service, to reduce the amount of boilerplate plumbing settings around.
- make separate option for patching out major glitches?
  - include GT code, Spacetime beam (currently patched out)
  - make OOB cause instant death?
  - others
- Better validation/error-handling of web service
- Add note to strat in Post-Crocomire farming room to get to top-left with HiJump
  (run on platform enemy and jump)
- Use separate worker pool to run randomization (to avoid blocking web requests)
- Rust cleanup:
    - Use `serde_json` instead of `json` crate for loading sm-json-data.
    - Clean up error handling: get rid of a bunch of remaining unwrap()'s, etc.
    - Look into using sm-rs-data.
- fix tiny bug: when loading door of the starting room (e.g. bottom-left of landing site) is an area transition, the area transition marker shows up on the map from the beginning of the game (due to running the door ASM while loading the game)
- fix internal checksum in output ROM?
- fix suit graphics not showing after getting suit (consequence of skipping animation)?
- making the map generation code more reusable, so that others could more easily apply it to other games.
